<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>직업 성향 테스트</title>
  <style>
    :root {
      --bg: #0b1020;
      --card: #121936;
      --text: #e8ecff;
      --muted: #9aa3c7;
      --accent: #6aa7ff;
      --accent-2: #57d2b5;
      --danger: #ff7a7a;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", sans-serif;
      background: radial-gradient(1200px 800px at 10% -10%, #1a2550, transparent),
                  radial-gradient(1000px 700px at 110% 20%, #0c1f3a, transparent),
                  var(--bg);
      color: var(--text);
      min-height: 100vh; display: grid; place-items: center; padding: 24px;
    }
    .app {
      width: 100%; max-width: 760px; background: linear-gradient(180deg, #12193a, #0f1733); border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px; padding: 28px; box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    header { display: flex; align-items: center; gap: 14px; margin-bottom: 18px; }
    .logo {
      width: 40px; height: 40px; border-radius: 12px;
      background: conic-gradient(from 210deg, var(--accent), var(--accent-2));
      box-shadow: inset 0 0 12px rgba(0,0,0,0.35);
    }
    h1 { font-size: 22px; margin: 0; letter-spacing: 0.2px; }
    p { margin: 10px 0; color: var(--muted); }

    .card { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; padding: 18px; }
    .btn {
      appearance: none; border: 1px solid rgba(255,255,255,0.12); color: var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border-radius: 12px; padding: 12px 16px; cursor: pointer; font-weight: 600; letter-spacing: 0.2px;
      transition: transform .06s ease, background .2s ease, border-color .2s ease; width: 100%;
    }
    .btn:hover { border-color: rgba(255,255,255,0.25); }
    .btn:active { transform: translateY(1px) scale(0.998); }
    .btn.primary { background: linear-gradient(180deg, #6aa7ff33, #6aa7ff1a); border-color: #6aa7ff55; }
    .btn.ghost { background: transparent; }

    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 520px){ .row { grid-template-columns: 1fr; } }

    .progress { height: 10px; background: rgba(255,255,255,0.08); border-radius: 999px; overflow: hidden; margin: 14px 0 18px; }
    .bar { height: 100%; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .25s ease; }

    .q-number { color: var(--muted); font-weight: 600; font-size: 13px; letter-spacing: 0.6px; text-transform: uppercase; }
    .question { font-size: 20px; line-height: 1.4; margin: 10px 0 14px; }

    .scale { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 6px; }
    .scale .btn { padding: 14px 10px; font-weight: 700; }
    .hint { display: flex; justify-content: space-between; font-size: 12px; color: var(--muted); margin-top: 8px; }

    .pill { display:inline-flex; gap:8px; align-items:center; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.04); font-size:12px; color: var(--muted); }

    .result-grid { display: grid; gap: 12px; }
    .score { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 12px; }
    .score h3 { margin: 0 0 8px; font-size: 15px; letter-spacing: 0.2px; }
    .meter { height: 10px; background: rgba(255,255,255,0.08); border-radius: 999px; overflow: hidden; }
    .meter > div { height: 100%; width: 0; background: linear-gradient(90deg, var(--accent-2), var(--accent)); transition: width .4s ease; }

    .jobs { display: grid; gap: 10px; margin-top: 16px; }
    .jobs ul { margin: 6px 0 0 18px; color: var(--text); }

    .footer { margin-top: 16px; color: var(--muted); font-size: 12px; text-align: center; }
    .actions { display:flex; gap:10px; margin-top:16px; }
    .actions .btn { width:auto; padding: 12px 14px; }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
  </style>
</head>
<body>
  <main class="app" role="application" aria-label="직업 성향 테스트 애플리케이션">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>직업 성향 테스트</h1>
        <p>12개의 짧은 문항에 답하면 나의 성향과 어울리는 직무를 추천받습니다. (약 2분)</p>
      </div>
    </header>

    <section id="screen-start" class="card" aria-live="polite">
      <p>아래 버튼을 눌러 시작하세요. 각 문항은 <strong>전혀 아니다</strong> ~ <strong>매우 그렇다</strong> 5단계로 응답합니다.</p>
      <div class="row" style="margin-top:10px;">
        <button class="btn primary" id="btn-start">지금 시작하기</button>
        <button class="btn ghost" id="btn-how">사용 방법</button>
      </div>
    </section>

    <section id="screen-how" class="card" hidden>
      <div class="pill" aria-hidden="true">도움말</div>
      <p style="margin-top:8px;">질문은 네 가지 성향(분석 A · 창의 C · 사람 S · 실행 P)을 측정하도록 구성되었습니다. 결과 화면에서 각 성향의 점수와 추천 직무를 확인할 수 있습니다.</p>
      <div class="actions">
        <button class="btn" id="btn-back1">뒤로</button>
        <button class="btn primary" id="btn-start2">시작하기</button>
      </div>
    </section>

    <section id="screen-quiz" class="card" hidden>
      <div class="q-number" id="q-number">문항 1/12</div>
      <div class="progress" aria-hidden="true"><div class="bar" id="progress"></div></div>
      <div class="question" id="q-text">질문</div>
      <div class="scale" role="group" aria-label="응답 선택">
        <button class="btn" data-v="1">전혀 아니다</button>
        <button class="btn" data-v="2">아닌 편이다</button>
        <button class="btn" data-v="3">보통이다</button>
        <button class="btn" data-v="4">그런 편이다</button>
        <button class="btn" data-v="5">매우 그렇다</button>
      </div>
      <div class="hint" aria-hidden="true"><span>낮음</span><span>높음</span></div>
      <div class="actions">
        <button class="btn" id="btn-prev" disabled>이전</button>
        <button class="btn ghost" id="btn-reset">처음부터</button>
      </div>
    </section>

    <section id="screen-result" class="card" hidden>
      <div class="pill">내 결과</div>
      <h2 style="margin:10px 0 2px;">성향 점수</h2>
      <p style="margin-top:0">점수는 상위 100% 기준으로 환산됩니다.</p>
      <div class="result-grid" id="score-grid" aria-live="polite"></div>

      <div class="jobs" id="job-suggest"></div>

      <div class="actions">
        <button class="btn" id="btn-share">결과 복사</button>
        <button class="btn primary" id="btn-again">다시하기</button>
      </div>
      <p class="footer">※ 이 테스트는 경향을 파악하기 위한 참고용입니다. 실제 진로 결정은 경험과 상담을 통해 종합적으로 판단하세요.</p>
    </section>
  </main>

  <script>
    // --- 데이터 정의 ---
    const QUESTIONS = [
      { t: "복잡한 문제를 데이터로 분석하는 것을 즐긴다.", c: "A" },
      { t: "새로운 아이디어를 떠올리고 시각적으로 표현하는 게 즐겁다.", c: "C" },
      { t: "사람들의 고민을 듣고 해결책을 찾는 것이 보람 있다.", c: "S" },
      { t: "일정을 정리하고 일을 끝까지 밀어붙이는 것이 자신 있다.", c: "P" },
      { t: "숫자와 논리를 다루는 게 편하다.", c: "A" },
      { t: "디자인이나 글쓰기처럼 창작 활동을 자주 한다.", c: "C" },
      { t: "팀에서 분위기를 읽고 조율하는 역할을 자주 맡는다.", c: "S" },
      { t: "매뉴얼을 만들거나 프로세스를 개선하는 걸 좋아한다.", c: "P" },
      { t: "새로운 도구나 프로그래밍을 배우는 데 흥미가 있다.", c: "A" },
      { t: "스토리텔링으로 사람을 설득하는 데 자신 있다.", c: "C" },
      { t: "고객/동료와의 커뮤니케이션이 에너지를 준다.", c: "S" },
      { t: "현장에서 직접 움직이며 문제를 해결하는 게 맞다.", c: "P" },
    ];

    const CATE = {
      A: { name: "분석(Analytical)", desc: "데이터·논리·문제해결에 강점. 체계적으로 가설을 세우고 검증하는 일을 선호.", jobs: ["데이터 분석가", "데이터 엔지니어", "재무분석가", "리서처", "소프트웨어 개발자"] },
      C: { name: "창의(Creative)", desc: "아이디어·표현·스토리텔링에 강점. 새로운 콘셉트를 만들고 시각/언어로 풀어내는 일을 선호.", jobs: ["UX/UI 디자이너", "프로덕트 디자이너", "브랜드 디자이너", "콘텐츠 기획자", "마케터", "카피라이터"] },
      S: { name: "사람(Social)", desc: "관계·조율·서비스에 강점. 공감과 소통으로 문제를 해결하고 사람을 성장시키는 일을 선호.", jobs: ["인사/HRBP", "조직개발(OD)", "채용담당자", "상담사", "고객성공(CSM)", "B2B/B2C 영업", "교육기획자"] },
      P: { name: "실행(Practical)", desc: "조직·운영·현장 실행에 강점. 계획을 세우고 일정·품질을 관리하며 끝까지 완수하는 일을 선호.", jobs: ["프로젝트 매니저(PM)", "프로덕트 오퍼레이션", "품질관리(QA)", "생산관리", "공정/설비 엔지니어", "운영 매니저"] },
    };

    // 보다 구체적인 직무 설명 DB (요약)
    const JOBS_DB = {
      "데이터 분석가": {
        what: ["비즈니스 문제를 데이터로 정의", "대시보드/리포트 설계", "가설 검증 및 인사이트 도출"],
        skills: ["스프레드시트", "SQL", "통계 기초", "시각화 도구(예: Tableau)", "프레젠테이션"],
        first: ["보유 데이터로 간단한 KPI 대시보드 만들기", "CSV로 SQL 연습", "A/B 테스트 개념 학습"]
      },
      "데이터 엔지니어": {
        what: ["데이터 파이프라인 설계/구현", "ETL/ELT 운영", "데이터 품질 관리"],
        skills: ["Python", "SQL", "클라우드 기초", "배치/스트리밍 처리"]

    // --- 상태 ---
    let idx = 0;
    const answers = [];// 각 문항의 점수 저장 1~5
    const scores = { A: 0, C: 0, S: 0, P: 0 };

    // --- 요소 참조 ---
    const $ = (sel) => document.querySelector(sel);
    const start = $('#screen-start');
    const how = $('#screen-how');
    const quiz = $('#screen-quiz');
    const result = $('#screen-result');

    const qNum = $('#q-number');
    const qText = $('#q-text');
    const bar = $('#progress');
    const btnPrev = $('#btn-prev');

    // --- 유틸 ---
    const show = (el) => el.hidden = false;
    const hide = (el) => el.hidden = true;

    function fmtPct(v){ return Math.round(v * 100); }

    // --- 화면 전환 ---
    function goStart(){
      hide(how); hide(quiz); hide(result); show(start);
      resetAll(false);
    }
    function goHow(){ hide(start); show(how); }
    function goQuiz(){ hide(start); hide(how); hide(result); show(quiz); renderQ(); }
    function goResult(){ hide(quiz); show(result); renderResult(); }

    // --- 로직 ---
    function resetAll(andClear=true){
      idx = 0; bar.style.width = '0%'; btnPrev.disabled = true; 
      if(andClear){ answers.length = 0; scores.A = scores.C = scores.S = scores.P = 0; }
    }

    function renderQ(){
      const total = QUESTIONS.length;
      qNum.textContent = `문항 ${idx+1}/${total}`;
      const q = QUESTIONS[idx];
      qText.textContent = q.t;
      bar.style.width = `${((idx)/total)*100}%`;
      btnPrev.disabled = idx === 0;
    }

    function applyScore(i, value){
      const cat = QUESTIONS[i].c;
      // 이전 응답이 있으면 점수 롤백
      if(answers[i]){ scores[cat] -= answers[i]; }
      answers[i] = value;
      scores[cat] += value;
    }

    function next(){
      if(idx < QUESTIONS.length - 1){ idx++; renderQ(); }
      else { bar.style.width = '100%'; goResult(); }
    }

    function prev(){ if(idx>0){ idx--; renderQ(); } }

    function renderResult(){
      // 백분율 계산 (각 카테고리 3문항 * 최대 5점 = 15점)
      const maxPerCat = 15;
      const entries = Object.entries(scores).map(([k,v])=>({k, v, pct: v / maxPerCat}));
      entries.sort((a,b)=> b.pct - a.pct);

      // 점수 카드 렌더
      const grid = $('#score-grid');
      grid.innerHTML = '';
      Object.keys(CATE).forEach((k)=>{
        const info = CATE[k];
        const pct = (scores[k] / maxPerCat) * 100;
        const wrap = document.createElement('div');
        wrap.className = 'score';
        wrap.innerHTML = `
          <h3>${info.name} <span style="color:var(--muted); font-weight:500;">(${scores[k]} / ${maxPerCat})</span></h3>
          <div class="meter" role="meter" aria-valuemin="0" aria-valuemax="100" aria-valuenow="${Math.round(pct)}" aria-label="${info.name} 점수">
            <div style="width:${pct.toFixed(0)}%"></div>
          </div>
          <p style="margin:8px 0 0; color:var(--muted);">${info.desc}</p>
        `;
        grid.appendChild(wrap);
      });

      // 상위 1~2개 추천 직무
      const top = entries.filter((e, i)=> e.pct >= entries[0].pct - 0.05); // 5% 이내 동률 처리
      const jobsDiv = document.getElementById('job-suggest');
      jobsDiv.innerHTML = '<h2 style="margin:6px 0 0;">추천 직무</h2>';
      top.forEach(({k})=>{
        const info = CATE[k];
        const sec = document.createElement('div');
        sec.className = 'score';
        sec.innerHTML = `
          <h3>${info.name}</h3>
          <ul>${info.jobs.map(j=>`<li>${j}</li>`).join('')}</ul>
        `;
        jobsDiv.appendChild(sec);
      });

      // 공유 텍스트 준비
      const shareText = entries.map(e=>`${CATE[e.k].name}:${fmtPct(e.pct)}%`).join(' · ');
      document.getElementById('btn-share').onclick = async () => {
        const txt = `내 직업 성향 결과\n${shareText}`;
        try {
          await navigator.clipboard.writeText(txt);
          flash(`복사되었습니다!\n\n${txt}`);
        } catch { alert('복사에 실패했습니다. 브라우저 설정을 확인하세요.'); }
      };
    }

    function flash(message){
      const n = document.createElement('div');
      n.textContent = message;
      Object.assign(n.style, {
        position:'fixed', left:'50%', top:'16px', transform:'translateX(-50%)', padding:'10px 14px',
        background:'rgba(20,30,60,0.95)', color:'var(--text)', border:'1px solid rgba(255,255,255,0.18)',
        borderRadius:'10px', boxShadow:'0 6px 20px rgba(0,0,0,0.5)', zIndex:9999, whiteSpace:'pre-wrap'
      });
      document.body.appendChild(n);
      setTimeout(()=> n.remove(), 2400);
    }

    // --- 이벤트 바인딩 ---
    document.querySelectorAll('.scale .btn').forEach(btn=>{
      btn.addEventListener('click', () => {
        const value = Number(btn.dataset.v);
        applyScore(idx, value);
        next();
      });
    });

    document.getElementById('btn-prev').addEventListener('click', prev);
    document.getElementById('btn-reset').addEventListener('click', ()=>{ resetAll(); goStart(); });
    document.getElementById('btn-again').addEventListener('click', ()=>{ resetAll(); goQuiz(); });

    document.getElementById('btn-start').addEventListener('click', goQuiz);
    document.getElementById('btn-start2').addEventListener('click', goQuiz);
    document.getElementById('btn-how').addEventListener('click', goHow);
    document.getElementById('btn-back1').addEventListener('click', goStart);

    // 키보드 접근성 (좌/우 화살표로 값 선택)
    window.addEventListener('keydown', (e)=>{
      if(quiz.hidden) return;
      if(['ArrowLeft','ArrowRight','1','2','3','4','5'].includes(e.key)){
        e.preventDefault();
        let val = null;
        if(e.key==='ArrowLeft') val = Math.max(1, (answers[idx]||3)-1);
        if(e.key==='ArrowRight') val = Math.min(5, (answers[idx]||3)+1);
        if('12345'.includes(e.key)) val = Number(e.key);
        if(val){ applyScore(idx, val); next(); }
      }
    });
  </script>
</body>
</html>
